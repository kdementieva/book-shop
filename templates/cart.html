{% extends "base.html" %}

{% block title %}–ö–æ—Ä–∑–∏–Ω–∞ ‚Äî BookShop{% endblock %}

{% block content %}
<div class="max-w-5xl mx-auto px-4 py-8">
  <h2 class="text-2xl font-bold mb-6">üõí –í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h2>

  {% if cart_items %}
    <div class="overflow-x-auto">
      <table class="w-full table-auto border-collapse">
        <thead class="bg-gray-100 text-left text-sm text-gray-600">
          <tr>
            <th class="p-3">–ö–Ω–∏–≥–∞</th>
            <th class="p-3">–ê–≤—Ç–æ—Ä</th>
            <th class="p-3">–¶–µ–Ω–∞</th>
            <th class="p-3">–ö–æ–ª-–≤–æ</th>
            <th class="p-3">–°—É–º–º–∞</th>
            <th class="p-3">–£–¥–∞–ª–∏—Ç—å</th>
          </tr>
        </thead>
        <tbody class="text-sm text-gray-700 divide-y">
          {% for item in cart_items %}
          <tr>
            <td class="p-3">{{ item.book.name }}</td>
            <td class="p-3">{{ item.book.author }}</td>
            <td class="p-3">{{ item.book.price }} ‚ÇΩ</td>
            <td class="p-3">
              <form method="POST" action="{{ url_for('main.update_cart', item_id=item.id) }}" class="flex items-center gap-2">
                <button name="action" value="decrease" class="px-2 py-1 bg-gray-200 rounded hover:bg-gray-300 text-lg">‚Äì</button>
                <span class="px-3">{{ item.quantity }}</span>
                <button name="action" value="increase" class="px-2 py-1 bg-gray-200 rounded hover:bg-gray-300 text-lg">+</button>
              </form>
            </td>
            <td class="p-3">{{ item.book.price * item.quantity }} ‚ÇΩ</td>
            <td class="p-3">
              <form method="POST" action="{{ url_for('main.remove_from_cart', item_id=item.id) }}">
                <button type="submit" class="text-red-600 hover:underline text-sm">–£–¥–∞–ª–∏—Ç—å</button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="mt-6 text-right">
      <p class="text-lg font-semibold mb-4">–ò—Ç–æ–≥–æ: {{ total }} ‚ÇΩ</p>
      <a href="{{ url_for('main.checkout') }}" class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 transition">
        –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑
      </a>
    </div>

  {% else %}
    <p class="text-gray-600">–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞.</p>
  {% endif %}
</div>
{% endblock %}
